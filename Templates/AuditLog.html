{% if role == "Admin" %}
    {% extends "base.html" %}
{% else %}
    {% extends "base2.html" %}
{% endif %}
{% block title %}Library Loan System - Accounts{% endblock %}

{% block content %}
{% from "includes/_formsHelper.html" import render_field %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<style>
    #titletablelol {
    text-align: center;

    }
    #myInput {
    width:20%;


    }
        div.ex3 {

  height: 300px;
  width: 1400;
  overflow-y: auto;
}



</style>
<h1>Event Audit log</h1>
<br>
<div class = table-responsive">
  <input class="form-control" id="myInput" type = 'text' placeholder = 'Search...'>
<div class="ex3">
<br>
<table class="table table-hover table-bordered table-dark">
    <thead class="thread-dark">
        <th id="titletablelol" colspan="6">All User Activity Log</th>

    </thead>
  <thead class="thread-dark">
    <tr>
      <th scope ="col">Account_ID</th>
      <th scope ="col">Username</th>
      <th scope="col">Level</th>
      <th scope="col">Date and Time</th>
      <th scope="col">Event</th>
      <th scope="col">IP address</th>
      <th scope="col">IP Location</th>
    </tr>
  </thead>
  <tbody id="myTable">
    {% for i in allaccounts %}
    <tr>
      <th scope="row">{{ i['ID'] }}</th>
      <td>{{ i['Username'] }}</td>
      {% if i['EventType'] == 'AttemptedLogin'%}

      <td><span class="badge badge-warning">Warning</span></td>
      {% elif i['EventType'] == 'LoginFailure'%}
      <td><span class="badge badge-danger">Danger</span></td>
      {% else %}
      <td><span class="badge badge-success">Success</span></td>
      {% endif %}

      <td>{{ i['TimeOfActivity'] }}</td>
      <td>{{ i['EventType'] }}</td>
      <td>{{ i['IP_Address'] }}</td>
      <td>Location</td>
    </tr>
    {% endfor %}

  </tbody>
</table>
</div>
</div>
<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>-->
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
<!--<script>
  $(document).ready(function(){
            var socket = io();

    });
</script> -->
{% endblock %}